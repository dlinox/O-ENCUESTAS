import{p as ie,_ as re}from"./HDropDown-30850809.js";import{d as se,e as de,r as pe,a as ve,_ as ce}from"./HSelect-2089fc57.js";import{a as fe}from"./jsonApi-980bb927.js";import{u as A,o as R,F as be,d as me,l as z,K as xe,H as K,e as ae,t as Q,a as G,p as ge,O as ye,b as P}from"./use-outside-click-15baa299.js";import{x as Oe,a as V,b as he,u as Se}from"./use-text-value-36ba392e.js";import{f as Re,a as Ce}from"./hidden-7819c991.js";import{r as Ve,n as Ie,S as we}from"./transition-178bb12a.js";import{q as M,l as C,i as x,K as m,A as Te,s as Z,z as X,y as $,F as le,p as Y,x as Pe,B as ke,E as N,o as L,g as ee,w as j,a as H,b as F,L as te,m as _,c as J,h as oe,j as _e,n as W,t as ne,d as De}from"./index-38edce0e.js";function Be(o,g){return o===g}var Ee=(o=>(o[o.Open=0]="Open",o[o.Closed=1]="Closed",o))(Ee||{}),Ae=(o=>(o[o.Single=0]="Single",o[o.Multi=1]="Multi",o))(Ae||{}),Fe=(o=>(o[o.Pointer=0]="Pointer",o[o.Other=1]="Other",o))(Fe||{});let ue=Symbol("ComboboxContext");function q(o){let g=ke(ue,null);if(g===null){let O=new Error(`<${o} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(O,q),O}return g}let Ne=M({name:"Combobox",emits:{"update:modelValue":o=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Be},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(o,{slots:g,attrs:O,emit:I}){let e=C(1),t=C(null),u=C(null),h=C(null),l=C(null),d=C({static:!1,hold:!1}),c=C([]),y=C(null),w=C(1),T=C(!1);function E(n=s=>s){let s=y.value!==null?c.value[y.value]:null,v=ye(n(c.value.slice()),f=>R(f.dataRef.domRef)),i=s?v.indexOf(s):null;return i===-1&&(i=null),{options:v,activeOptionIndex:i}}let k=x(()=>o.multiple?1:0),a=x(()=>o.nullable),[p,b]=se(x(()=>o.modelValue===void 0?A(k.value,{[1]:[],[0]:void 0}):o.modelValue),n=>I("update:modelValue",n),x(()=>o.defaultValue)),r={comboboxState:e,value:p,mode:k,compare(n,s){if(typeof o.by=="string"){let v=o.by;return(n==null?void 0:n[v])===(s==null?void 0:s[v])}return o.by(n,s)},defaultValue:x(()=>o.defaultValue),nullable:a,inputRef:u,labelRef:t,buttonRef:h,optionsRef:l,disabled:x(()=>o.disabled),options:c,change(n){b(n)},activeOptionIndex:x(()=>{if(T.value&&y.value===null&&c.value.length>0){let n=c.value.findIndex(s=>!s.dataRef.disabled);n!==-1&&(y.value=n)}return y.value}),activationTrigger:w,optionsPropsRef:d,closeCombobox(){T.value=!1,!o.disabled&&e.value!==1&&(e.value=1,y.value=null)},openCombobox(){if(T.value=!0,o.disabled||e.value===0)return;let n=c.value.findIndex(s=>{let v=m(s.dataRef.value);return A(k.value,{[0]:()=>r.compare(m(r.value.value),m(v)),[1]:()=>m(r.value.value).some(i=>r.compare(m(i),m(v)))})});n!==-1&&(y.value=n),e.value=0},goToOption(n,s,v){if(T.value=!1,o.disabled||l.value&&!d.value.static&&e.value===1)return;let i=E();if(i.activeOptionIndex===null){let S=i.options.findIndex(U=>!U.dataRef.disabled);S!==-1&&(i.activeOptionIndex=S)}let f=Oe(n===V.Specific?{focus:V.Specific,id:s}:{focus:n},{resolveItems:()=>i.options,resolveActiveIndex:()=>i.activeOptionIndex,resolveId:S=>S.id,resolveDisabled:S=>S.dataRef.disabled});y.value=f,w.value=v??1,c.value=i.options},selectOption(n){let s=c.value.find(i=>i.id===n);if(!s)return;let{dataRef:v}=s;b(A(k.value,{[0]:()=>v.value,[1]:()=>{let i=m(r.value.value).slice(),f=m(v.value),S=i.findIndex(U=>r.compare(f,m(U)));return S===-1?i.push(f):i.splice(S,1),i}}))},selectActiveOption(){if(r.activeOptionIndex.value===null)return;let{dataRef:n,id:s}=c.value[r.activeOptionIndex.value];b(A(k.value,{[0]:()=>n.value,[1]:()=>{let v=m(r.value.value).slice(),i=m(n.value),f=v.findIndex(S=>r.compare(i,m(S)));return f===-1?v.push(i):v.splice(f,1),v}})),r.goToOption(V.Specific,s)},registerOption(n,s){let v={id:n,dataRef:s},i=E(f=>[...f,v]);if(y.value===null){let f=s.value.value;A(k.value,{[0]:()=>r.compare(m(r.value.value),m(f)),[1]:()=>m(r.value.value).some(S=>r.compare(m(S),m(f)))})&&(i.activeOptionIndex=i.options.indexOf(v))}c.value=i.options,y.value=i.activeOptionIndex,w.value=1,i.options.some(f=>!R(f.dataRef.domRef))&&requestAnimationFrame(()=>{let f=E();c.value=f.options,y.value=f.activeOptionIndex})},unregisterOption(n){var s;r.activeOptionIndex.value!==null&&((s=r.options.value[r.activeOptionIndex.value])==null?void 0:s.id)===n&&(T.value=!0);let v=E(i=>{let f=i.findIndex(S=>S.id===n);return f!==-1&&i.splice(f,1),i});c.value=v.options,y.value=v.activeOptionIndex,w.value=1}};be([u,h,l],()=>r.closeCombobox(),x(()=>e.value===0)),Te(ue,r),me(x(()=>A(e.value,{[0]:z.Open,[1]:z.Closed})));let D=x(()=>r.activeOptionIndex.value===null?null:c.value[r.activeOptionIndex.value].dataRef.value),B=x(()=>{var n;return(n=R(u))==null?void 0:n.closest("form")});return Z(()=>{X([B],()=>{if(!B.value||o.defaultValue===void 0)return;function n(){r.change(o.defaultValue)}return B.value.addEventListener("reset",n),()=>{var s;(s=B.value)==null||s.removeEventListener("reset",n)}},{immediate:!0})}),()=>{let{name:n,disabled:s,form:v,...i}=o,f={open:e.value===0,disabled:s,activeIndex:r.activeOptionIndex.value,activeOption:D.value,value:p.value};return $(le,[...n!=null&&p.value!=null?de({[n]:p.value}).map(([S,U])=>$(Re,xe({features:Ce.Hidden,key:S,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:v,name:S,value:U}))):[],K({theirProps:{...O,...ae(i,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:f,slots:g,attrs:O,name:"Combobox"})])}}}),Le=M({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${Q()}`}},setup(o,{attrs:g,slots:O,expose:I}){let e=q("ComboboxButton");I({el:e.buttonRef,$el:e.buttonRef});function t(l){e.disabled.value||(e.comboboxState.value===0?e.closeCombobox():(l.preventDefault(),e.openCombobox()),N(()=>{var d;return(d=R(e.inputRef))==null?void 0:d.focus({preventScroll:!0})}))}function u(l){switch(l.key){case P.ArrowDown:l.preventDefault(),l.stopPropagation(),e.comboboxState.value===1&&e.openCombobox(),N(()=>{var d;return(d=e.inputRef.value)==null?void 0:d.focus({preventScroll:!0})});return;case P.ArrowUp:l.preventDefault(),l.stopPropagation(),e.comboboxState.value===1&&(e.openCombobox(),N(()=>{e.value.value||e.goToOption(V.Last)})),N(()=>{var d;return(d=e.inputRef.value)==null?void 0:d.focus({preventScroll:!0})});return;case P.Escape:if(e.comboboxState.value!==0)return;l.preventDefault(),e.optionsRef.value&&!e.optionsPropsRef.value.static&&l.stopPropagation(),e.closeCombobox(),N(()=>{var d;return(d=e.inputRef.value)==null?void 0:d.focus({preventScroll:!0})});return}}let h=he(x(()=>({as:o.as,type:g.type})),e.buttonRef);return()=>{var l,d;let c={open:e.comboboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:y,...w}=o,T={ref:e.buttonRef,id:y,type:h.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(l=R(e.optionsRef))==null?void 0:l.id,"aria-expanded":e.disabled.value?void 0:e.comboboxState.value===0,"aria-labelledby":e.labelRef.value?[(d=R(e.labelRef))==null?void 0:d.id,y].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:u,onClick:t};return K({ourProps:T,theirProps:w,slot:c,attrs:g,slots:O,name:"ComboboxButton"})}}}),Ue=M({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${Q()}`}},emits:{change:o=>!0},setup(o,{emit:g,attrs:O,slots:I,expose:e}){let t=q("ComboboxInput"),u={value:!1};e({el:t.inputRef,$el:t.inputRef});let h=x(()=>{var a;let p=t.value.value;return R(t.inputRef)?typeof o.displayValue<"u"&&p!==void 0?(a=o.displayValue(p))!=null?a:"":typeof p=="string"?p:"":""});Z(()=>{X([h,t.comboboxState],([a,p],[b,r])=>{if(u.value)return;let D=R(t.inputRef);D&&(r===0&&p===1||a!==b)&&(D.value=a)},{immediate:!0}),X([t.comboboxState],([a],[p])=>{if(a===0&&p===1){let b=R(t.inputRef);if(!b)return;let r=b.value,{selectionStart:D,selectionEnd:B,selectionDirection:n}=b;b.value="",b.value=r,n!==null?b.setSelectionRange(D,B,n):b.setSelectionRange(D,B)}})});let l=C(!1),d=C(null);function c(){l.value=!0}function y(){Ve().nextFrame(()=>{l.value=!1,d.value&&(t.openCombobox(),g("change",d.value),d.value=null)})}function w(a){switch(u.value=!0,a.key){case P.Backspace:case P.Delete:if(t.mode.value!==0||!t.nullable.value)return;let p=a.currentTarget;requestAnimationFrame(()=>{if(p.value===""){t.change(null);let b=R(t.optionsRef);b&&(b.scrollTop=0),t.goToOption(V.Nothing)}});break;case P.Enter:if(u.value=!1,t.comboboxState.value!==0||l.value)return;if(a.preventDefault(),a.stopPropagation(),t.activeOptionIndex.value===null){t.closeCombobox();return}t.selectActiveOption(),t.mode.value===0&&t.closeCombobox();break;case P.ArrowDown:return u.value=!1,a.preventDefault(),a.stopPropagation(),A(t.comboboxState.value,{[0]:()=>t.goToOption(V.Next),[1]:()=>t.openCombobox()});case P.ArrowUp:return u.value=!1,a.preventDefault(),a.stopPropagation(),A(t.comboboxState.value,{[0]:()=>t.goToOption(V.Previous),[1]:()=>{t.openCombobox(),N(()=>{t.value.value||t.goToOption(V.Last)})}});case P.Home:if(a.shiftKey)break;return u.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(V.First);case P.PageUp:return u.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(V.First);case P.End:if(a.shiftKey)break;return u.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(V.Last);case P.PageDown:return u.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(V.Last);case P.Escape:if(u.value=!1,t.comboboxState.value!==0)return;a.preventDefault(),t.optionsRef.value&&!t.optionsPropsRef.value.static&&a.stopPropagation(),t.closeCombobox();break;case P.Tab:if(u.value=!1,t.comboboxState.value!==0)return;t.mode.value===0&&t.selectActiveOption(),t.closeCombobox();break}}function T(a){if(l.value){d.value=a;return}t.openCombobox(),g("change",a)}function E(){u.value=!1}let k=x(()=>{var a,p,b,r;return(r=(b=(p=o.defaultValue)!=null?p:t.defaultValue.value!==void 0?(a=o.displayValue)==null?void 0:a.call(o,t.defaultValue.value):null)!=null?b:t.defaultValue.value)!=null?r:""});return()=>{var a,p,b,r,D,B;let n={open:t.comboboxState.value===0},{id:s,displayValue:v,onChange:i,...f}=o,S={"aria-controls":(a=t.optionsRef.value)==null?void 0:a.id,"aria-expanded":t.disabled.value?void 0:t.comboboxState.value===0,"aria-activedescendant":t.activeOptionIndex.value===null||(p=t.options.value[t.activeOptionIndex.value])==null?void 0:p.id,"aria-labelledby":(D=(b=R(t.labelRef))==null?void 0:b.id)!=null?D:(r=R(t.buttonRef))==null?void 0:r.id,"aria-autocomplete":"list",id:s,onCompositionstart:c,onCompositionend:y,onKeydown:w,onInput:T,onBlur:E,role:"combobox",type:(B=O.type)!=null?B:"text",tabIndex:0,ref:t.inputRef,defaultValue:k.value,disabled:t.disabled.value===!0?!0:void 0};return K({ourProps:S,theirProps:f,slot:n,attrs:O,slots:I,features:G.RenderStrategy|G.Static,name:"ComboboxInput"})}}}),je=M({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(o,{attrs:g,slots:O,expose:I}){let e=q("ComboboxOptions"),t=`headlessui-combobox-options-${Q()}`;I({el:e.optionsRef,$el:e.optionsRef}),Y(()=>{e.optionsPropsRef.value.static=o.static}),Y(()=>{e.optionsPropsRef.value.hold=o.hold});let u=ge(),h=x(()=>u!==null?(u.value&z.Open)===z.Open:e.comboboxState.value===0);return ie({container:x(()=>R(e.optionsRef)),enabled:x(()=>e.comboboxState.value===0),accept(l){return l.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:l.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(l){l.setAttribute("role","none")}}),()=>{var l,d,c;let y={open:e.comboboxState.value===0},w={"aria-labelledby":(c=(l=R(e.labelRef))==null?void 0:l.id)!=null?c:(d=R(e.buttonRef))==null?void 0:d.id,id:t,ref:e.optionsRef,role:"listbox","aria-multiselectable":e.mode.value===1?!0:void 0},T=ae(o,["hold"]);return K({ourProps:w,theirProps:T,slot:y,attrs:g,slots:O,features:G.RenderStrategy|G.Static,visible:h.value,name:"ComboboxOptions"})}}}),Ke=M({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(o,{slots:g,attrs:O,expose:I}){let e=q("ComboboxOption"),t=`headlessui-combobox-option-${Q()}`,u=C(null);I({el:u,$el:u});let h=x(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t:!1),l=x(()=>A(e.mode.value,{[0]:()=>e.compare(m(e.value.value),m(o.value)),[1]:()=>m(e.value.value).some(a=>e.compare(m(a),m(o.value)))})),d=x(()=>({disabled:o.disabled,value:o.value,domRef:u}));Z(()=>e.registerOption(t,d)),Pe(()=>e.unregisterOption(t)),Y(()=>{e.comboboxState.value===0&&h.value&&e.activationTrigger.value!==0&&N(()=>{var a,p;return(p=(a=R(u))==null?void 0:a.scrollIntoView)==null?void 0:p.call(a,{block:"nearest"})})});function c(a){if(o.disabled)return a.preventDefault();e.selectOption(t),e.mode.value===0&&e.closeCombobox(),Ie()||requestAnimationFrame(()=>{var p;return(p=R(e.inputRef))==null?void 0:p.focus()})}function y(){if(o.disabled)return e.goToOption(V.Nothing);e.goToOption(V.Specific,t)}let w=Se();function T(a){w.update(a)}function E(a){w.wasMoved(a)&&(o.disabled||h.value||e.goToOption(V.Specific,t,0))}function k(a){w.wasMoved(a)&&(o.disabled||h.value&&(e.optionsPropsRef.value.hold||e.goToOption(V.Nothing)))}return()=>{let{disabled:a}=o,p={active:h.value,selected:l.value,disabled:a},b={id:t,ref:u,role:"option",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-selected":l.value,disabled:void 0,onClick:c,onFocus:y,onPointerenter:T,onMouseenter:T,onPointermove:E,onMousemove:E,onPointerleave:k,onMouseleave:k};return K({ourProps:b,theirProps:o,slot:p,attrs:O,slots:g,name:"ComboboxOption"})}}});const Me={class:"relative mt-1"},qe={class:"relative w-full cursor-default overflow-hidden rounded-lg bg-white text-left shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-teal-300 sm:text-sm"},He={key:0,class:"relative cursor-default select-none py-2 px-4 text-gray-700"},Je={__name:"HAutoComplete",props:{itemValue:{type:String,default:"id"},itemTitle:{type:String,default:"title"},modelValue:{type:[String,Number,Object],default:null}},emits:["update:modelValue"],setup(o,{emit:g}){const O=o,I=x({get:()=>O.modelValue,set:u=>g("update:modelValue",u)});let e=C(""),t=x(()=>e.value===""?[]:fe.filter(u=>u.title.toLowerCase().replace(/\s+/g,"").includes(e.value.toLowerCase().replace(/\s+/g,""))));return(u,h)=>(L(),ee(_(Ne),{modelValue:I.value,"onUpdate:modelValue":h[2]||(h[2]=l=>I.value=l)},{default:j(()=>[H("div",Me,[H("div",qe,[F(_(Ue),{class:"w-full border-none py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",displayValue:l=>l==null?void 0:l[`${this.itemTitle}`],onChange:h[0]||(h[0]=l=>te(e)?e.value=l.target.value:e=l.target.value)},null,8,["displayValue"]),F(_(Le),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:j(()=>[F(_(pe),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),F(_(we),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:h[1]||(h[1]=l=>te(e)?e.value="":e="")},{default:j(()=>[F(_(je),{class:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:j(()=>[_(t).length===0&&_(e)!==""?(L(),J("div",He," Nothing found. ")):oe("",!0),(L(!0),J(le,null,_e(_(t),l=>(L(),ee(_(Ke),{as:"template",key:l[`${this.itemValue}`],value:l},{default:j(({selected:d,active:c})=>[H("li",{class:W(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":c,"text-gray-900":!c}])},[H("span",{class:W(["block truncate",{"font-medium":d,"font-normal":!d}])},ne(l[`${this.itemTitle}`]),3),d?(L(),J("span",{key:0,class:W(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":c,"text-teal-600":!c}])},[F(_(ve),{class:"h-5 w-5","aria-hidden":"true"})],2)):oe("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}},et={__name:"headless-components",setup(o){const g=C(1),O=C({userId:6,id:101,title:"explicabo enim cumque porro aperiam occaecati minima",completed:!1}),I=[{idUser:1,name:"Select Opcion 1"},{idUser:2,name:"Select Opcion 2"},{idUser:3,name:"Select Opcion 3"}];return(e,t)=>(L(),J("div",null,[F(re),F(ce,{options:I,"item-title":"name","item-value":"idUser",modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=u=>g.value=u)},null,8,["modelValue"]),F(Je,{modelValue:O.value,"onUpdate:modelValue":t[1]||(t[1]=u=>O.value=u)},null,8,["modelValue"]),De(" "+ne(O.value),1)]))}};export{et as default};
